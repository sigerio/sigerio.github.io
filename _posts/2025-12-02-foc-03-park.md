---
layout: post
title: "帕克(Park)变换、反帕克变换和反克拉克变换"
date: 2025-12-02
category: 电力电子
tags: [FOC, 电力电子, 坐标变换, Park变换]
toc: true
---

## 专有名词解释

| 术语 | 全称/含义 | 详细解释 |
|------|----------|---------|
| Park变换 | Park Transformation | 将两相静止坐标系(αβ)转换为两相旋转坐标系(dq)的数学变换 |
| dq坐标系 | 两相旋转坐标系 | d轴与转子磁极对齐，q轴超前d轴90°，随转子同步旋转 |
| $\theta$ | 电角度 | 转子磁极与α轴之间的夹角，$\theta_e = P \cdot \theta_m$（P为极对数） |
| $I_d$ | D轴电流（励磁电流） | 产生与转子磁场同向的磁场，通常设为0以最大化转矩效率 |
| $I_q$ | Q轴电流（转矩电流） | 产生与转子磁场正交的磁场，直接决定电机输出转矩 |
| 反Park变换 | Inverse Park | 从dq坐标系到αβ坐标系的逆变换 |
| 反Clark变换 | Inverse Clarke | 从αβ坐标系到ABC坐标系的逆变换 |

## 电角度与机械角度的关系

**电角度（$\theta_e$）** 与 **机械角度（$\theta_m$）** 的关系：

$$\theta_e = P \cdot \theta_m$$

其中 $P$ 为电机的**极对数**。

| 极对数P | 机械转一圈 | 电角度变化 |
|--------|-----------|-----------|
| 1 | 360° | 360° |
| 2 | 360° | 720° |
| 4 | 360° | 1440° |
| 7 | 360° | 2520° |

> 电角度是FOC控制的核心参数，由Hall传感器或无感算法（如EKF）获取。

## $I_d$ 和 $I_q$ 的物理意义

### $I_d$（D轴电流/励磁电流）

- **方向**：与转子永磁体磁场方向一致
- **作用**：产生与转子磁场同向或反向的定子磁场
- **FOC控制策略**：通常设为0（$I_d = 0$ 控制）
- **设为0的原因**：
  - 永磁同步电机（PMSM）已有永磁体提供励磁
  - 额外的励磁电流会增加铜损，降低效率
  - 使所有定子电流都用于产生转矩

### $I_q$（Q轴电流/转矩电流）

- **方向**：与转子磁场正交（超前90°）
- **作用**：与转子磁场交互产生电磁转矩
- **转矩公式**：$T_e = K_t \cdot I_q$（$K_t$为转矩常数）
- **控制意义**：
  - 增大 $I_q$ → 增大电磁转矩 → 加速电机
  - 减小 $I_q$ → 减小电磁转矩 → 减速或制动

### dq电流与转矩的关系

$$T_e = \frac{3}{2} P \cdot \psi_f \cdot I_q$$

其中：
- $T_e$：电磁转矩
- $P$：极对数
- $\psi_f$：永磁体磁链
- $I_q$：Q轴电流

## 坐标系建立依据

**两相旋转坐标系（dq）的建立：**
- d轴（Direct Axis）：与转子永磁体N极磁场方向对齐
- q轴（Quadrature Axis）：超前d轴90°电角度
- 坐标系随转子同步旋转，角速度等于电角速度 $\omega_e$
- 建立目的：将交流量转换为直流量，便于PID控制

## Park变换简介

**帕克变换（Park Transformation）** 将两相静止坐标系（αβ）转换为两相旋转坐标系（dq）。dq轴是跟随转子同步旋转的坐标轴，这使得交流量变为直流量，便于PID控制。

## Park变换公式

$$ i_d = i_\alpha \cos\theta + i_\beta \sin\theta $$

$$ i_q = -i_\alpha \sin\theta + i_\beta \cos\theta $$

### 变换矩阵形式

$$ \begin{bmatrix} i_d \\ i_q \end{bmatrix} = \begin{bmatrix} \cos\theta & \sin\theta \\ -\sin\theta & \cos\theta \end{bmatrix} \begin{bmatrix} i_\alpha \\ i_\beta \end{bmatrix} $$

其中 $\theta$ 为转子电角度。

## 反帕克变换

从dq坐标系往αβ坐标系进行变换：

$$ v_\alpha = v_d \cos\theta - v_q \sin\theta $$

$$ v_\beta = v_d \sin\theta + v_q \cos\theta $$

### 变换矩阵形式

$$ \begin{bmatrix} v_\alpha \\ v_\beta \end{bmatrix} = \begin{bmatrix} \cos\theta & -\sin\theta \\ \sin\theta & \cos\theta \end{bmatrix} \begin{bmatrix} v_d \\ v_q \end{bmatrix} $$

## 反克拉克变换

从αβ坐标系往ABC三相坐标系变换：

$$ V_a = v_\alpha $$

$$ V_b = \frac{-v_\alpha + \sqrt{3} v_\beta}{2} $$

$$ V_c = \frac{-v_\alpha - \sqrt{3} v_\beta}{2} $$

### 推导过程

从几何关系出发：

$$ v_a = v_\alpha \cos 0° + v_\beta \cos 90° = v_\alpha $$

$$ v_b = -v_\alpha \sin 30° + v_\beta \cos 30° = -\frac{1}{2}v_\alpha + \frac{\sqrt{3}}{2}v_\beta $$

$$ v_c = -v_\alpha \sin 30° - v_\beta \cos 30° = -\frac{1}{2}v_\alpha - \frac{\sqrt{3}}{2}v_\beta $$
