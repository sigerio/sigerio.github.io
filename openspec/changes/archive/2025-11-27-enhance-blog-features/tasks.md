# 任务清单：博客功能增强

## 变更标识
- **change-id**: `enhance-blog-features`

## 任务列表

### 阶段1：修复文章目录功能 [高优先级]

- [ ] **T1.1** 修改 `_layouts/post.html`，移除无效的 `toc_only` 过滤器
- [ ] **T1.2** 实现基于 kramdown 的 TOC 方案（使用 `{:toc}` 标记）
- [ ] **T1.3** 或实现基于 JavaScript 的客户端 TOC 生成方案
- [ ] **T1.4** 验证 TOC 在示例文章中正确渲染

**依赖**：无
**可并行**：否（需先确定方案）

### 阶段2：优化分类动态管理 [中优先级]

- [ ] **T2.1** 修改 `_includes/sidebar.html`，从 `site.categories` 集合动态读取分类
- [ ] **T2.2** 修改 `index.html` 首页，动态读取分类列表
- [ ] **T2.3** 修改 `categories/index.html`，动态读取分类列表
- [ ] **T2.4** 验证新增分类只需创建 `_categories/新分类.md` 文件

**依赖**：无
**可并行**：是（与阶段1可并行）

### 阶段3：验证与收尾 [必要]

- [ ] **T3.1** 本地验证所有页面正常渲染（如有本地环境）
- [ ] **T3.2** 检查 CSS 样式在修改后是否需要调整
- [ ] **T3.3** 提交变更并推送至 GitHub
- [ ] **T3.4** 验证 GitHub Pages 部署成功

**依赖**：阶段1、阶段2完成

## 方案选择点

### TOC 实现方案

| 方案 | 优点 | 缺点 |
|------|------|------|
| **A: kramdown {:toc}** | 无需 JS，服务端渲染 | 需要在每篇文章中手动添加 `{:toc}` 标记 |
| **B: JavaScript 客户端生成** | 自动生成，无需修改文章 | 依赖 JS，SEO 略差 |
| **C: Jekyll 插件** | 功能完善 | 部分插件不在 GitHub Pages 白名单 |

**建议**：方案 B（JavaScript 客户端生成），理由：
- 自动化程度高
- 不需要修改现有文章
- 与现有 JS 架构一致

## 预估工作量

| 阶段 | 预估时间 |
|------|----------|
| 阶段1 | 30 分钟 |
| 阶段2 | 20 分钟 |
| 阶段3 | 10 分钟 |
| **总计** | **60 分钟** |
